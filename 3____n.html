<!doctype html>
<html lang="en">
<head>
<link rel="stylesheet" type="text/css" href="base.css" />
<link rel="stylesheet" type="text/css" href="content.css" />
<link rel="stylesheet" type="text/css" href="nav.css" />
<meta http-equiv="content-type" content="text/html;  charset=utf-8" />
<title>3. 声母+ 短元音韵腹 + 韵尾-n | 阮玉煌 —— 越南语 - 练习发音资料 [Weixin: XiDeYueNanYu] </title>
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<meta name="author" content="阮玉煌" />
<meta name="generator" content="eXeLearning 2.9 - exelearning.net" />
<!--[if lt IE 9]><script type="text/javascript" src="exe_html5.js"></script><![endif]-->
<script type="text/javascript" src="exe_jquery.js"></script>
<script type="text/javascript" src="common_i18n.js"></script>
<script type="text/javascript" src="common.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
    </head>
<body class="exe-web-site" id="exe-node-7"><script type="text/javascript">document.body.className+=" js"</script>
<div id="content">
<p id="skipNav"><a href="#main" class="sr-av">Skip navigation</a></p>
<header id="header" ><div id="headerContent">阮玉煌 —— 越南语 - 练习发音资料 [Weixin: XiDeYueNanYu]</div></header>
<nav id="siteNav">
<ul>
   <li><a href="index.html" class="daddy main-node">Home</a></li>
   <li><a href="1_.html" class="no-ch">1. 越南语发音概况</a></li>
   <li><a href="2___a.html" class="no-ch">2. 短元音: ă-â (A)</a></li>
   <li id="active"><a href="3____n.html" class="active no-ch">3. 声母+ 短元音韵腹 + 韵尾-n</a></li>
   <li><a href="4____ng.html" class="no-ch">4. 声母+ 短元音韵腹 + 韵尾-ng</a></li>
   <li><a href="5____m.html" class="no-ch">5. 声母+ 短元音韵腹 + 韵尾-m</a></li>
   <li><a href="6____p.html" class="no-ch">6. 声母+ 短元音韵腹 + 韵尾-p</a></li>
   <li><a href="7____t.html" class="no-ch">7. 声母+ 短元音韵腹 + 韵尾-t</a></li>
   <li><a href="8____c.html" class="no-ch">8. 声母+ 短元音韵腹 + 韵尾-c</a></li>
   <li><a href="9__oo.html" class="daddy">9. 长元音: oo</a>
   <ul class="other-section">
      <li><a href="a__oong.html" class="no-ch">a. 韵母 oong</a></li>
      <li><a href="b__ooc.html" class="no-ch">b. 韵母 ooc</a></li>
   </ul>
   </li>
</ul>
</nav>
<div id='topPagination'>
<nav class="pagination noprt">
<a href="2___a.html" class="prev"><span><span>&laquo; </span>Previous</span></a> <span class="sep">| </span><a href="4____ng.html" class="next"><span>Next<span> &raquo;</span></span></a>
</nav>
</div>
<div id="main-wrapper">
<section id="main">
<header id="nodeDecoration"><h1 id="nodeTitle">3. 声母+ 短元音韵腹 + 韵尾-n</h1></header>
<article class="iDevice_wrapper textIdevice" id="id7">
<div class="iDevice emphasis0" >
<div id="ta7_134_2" class="block iDevice_content">
<div class="exe-text"><style>
        .matrix-container {
            display: inline-block;
            margin-top: 20px;
        }
        .row {
            display: flex; /* Sử dụng Flexbox để sắp xếp nút trong hàng */
            justify-content: flex-start; /* Căn trái */
            align-items: center; /* Căn giữa theo chiều dọc */
        }
        .button {
            width: 100px;
            height: 40px;
            margin: 2px;
            border: 2px solid #C0C0C0;
            border-radius: 5px;
            box-shadow: 2px 2px 4px #C0C0C0;
            cursor: pointer;
            font-size: 21px;
            font-weight: bold;
            font-family: Arial, sans-serif;
            text-align: center;
        }
        .header-button {
            background-color: #B7D7AA;
            color: #274E13;
        }
        .normal-button {
            background-color: #D9EAD3;
            color: #0C343D;
        }
        .playing {
            border: 2px solid #FF6820; /* Viền cam khi audio đang phát */
        }
        .record-button {
            background-color: #FF6820;
            color: #FFFFFF;
            width: 100px;
            height: 40px;
            font-size: 16px;
            margin: 2px;
        }
        .recording {
            background-color: #009300;
            color: #FFFFFF;
            width: 100px;
            height: 40px;
            font-size: 16px;
            margin: 2px;
        }
        .playback-button {
            background-color: #7D9EC0;
            color: #184008;
            width: 100px;
            height: 40px;
            font-size: 16px;
            margin: 2px;
        }
        .save-button {
            background-color: #CFE2F3;
            color: #184008;
            width: 100px;
            height: 40px;
            font-size: 16px;
            margin: 2px;
        }
        .controls {
            margin-top: 10px;
        }
    </style>
<p><strong><span style="background-color: #ffff00;">注意: 这里列出韵母 ăn, ân 与声母的常见搭配的同时也列出相对应韵母 an, ơn 的情况以供学生对比发音。 </span></strong><br /><strong><span style="background-color: #ffff00;">在确保有意义搭配的前提下， 大部分含有韵母 an, ăn, ơn, ân 的配对音节是有着同样的声调的， 但是也</span></strong><br /><strong><span style="background-color: #ffff00;">有小部分声调不一样， 如: mơn-mận (没有mợn）。 空格子代表没有相对应的搭配。</span></strong> <br /><audio src="-n.mp3" id="audioPlayer"><a href="-n.mp3">audio/mpeg</a></audio><br /><br /><audio style="display: none;" id="playbackAudio"></audio></p>
<div id="matrix" class="matrix-container"></div>
<div class="controls"><button id="recordButton" class="button record-button">录音</button> <button id="playbackButton" class="button playback-button">试听</button> <button id="saveButton" class="button save-button">保存</button></div>
<p>
<script>
        const labels = [
            ["", "an", "ăn", "ơn", "ân"],
            ["b", "bán", "bắn", "", "bận"],
            ["m", "mạn", "mặn", "mơn", "mận"],
            ["n", "nạn", "nặn", "", "nấn"],
            ["th", "than", "thăn", "", "thân"],
            ["t", "tan", "tăn", "tợn", "tận"],
            ["x", "", "xắn", "xờn", ""],
            ["s", "san", "săn", "sơn", "sân"],
            ["l", "lan", "lăn", "lớn", "lấn"],
            ["d", "dạn", "dặn", "", "dân"],
            ["gi", "", "", "giỡn", ""],
            ["r", "rán", "rắn", "rợn", "rận"],
            ["c, k", "cán", "cắn", "cỡn", "cẫn"],
            ["kh", "khan", "khăn", "", ""],
            ["h", "hán", "hắn", "hơn", "hân"],
            ["ph", "phán", "phắn", "phởn", "phẫn"],
            ["v", "van", "văn", "vờn", "vần"],
            ["tr", "tràn", "trằn", "trợn", "trận"],
            ["ch", "chan", "chăn", "", "chân"],
            ["nh", "nhàn", "nhằn", "nhờn", "nhận"],
            ["đ", "đán", "đắn", "đơn", "đân"],
            ["ng", "ngán", "ngắn", "ngớn", "ngấn"],
            ["g", "gán", "gắn", "gợn", "gân"]
        ];
/*
        // Khai báo audioSegments dưới dạng mảng 2D (23 hàng x 5 cột) để khớp với labels
        const audioSegments = [
            [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0]],
            [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0]],
            [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0]],
            [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0]],
            [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0]],
            [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0]],
            [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0]],
            [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0]],
            [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0]],
            [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0]],
            [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0]],
            [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0]],
            [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0]],
            [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0]],
            [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0]],
            [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0]],
            [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0]],
            [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0]],
            [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0]],
            [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0]],
            [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0]],
            [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0]],
            [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0]]
        ];
*/
const audioSegments = [
    [[0, 0], [1.253878, 2.089796], [2.635465, 3.343673], [3.773243, 4.585941], [4.96907, 5.688889]],
    [[0, 0], [7.128526, 7.952834], [8.196644, 8.962902], [0, 0], [9.438912, 10.07746]],
    [[0, 0], [11.273288, 12.120816], [12.422676, 13.107664], [13.606893, 14.396372], [14.605351, 15.38322]],
    [[0, 0], [16.161088, 16.973787], [17.217596, 17.995465], [0, 0], [18.343764, 19.423492]],
    [[0, 0], [20.25941, 21.223039], [21.315918, 22.267937], [0, 0], [22.372426, 23.312834]],
    [[0, 0], [24.218413, 25.065941], [25.170431, 26.064399], [26.250159, 27.178957], [27.376327, 28.258685]],
    [[0, 0], [0, 0], [28.781134, 29.767982], [29.953741, 30.9522], [0, 0]],
    [[0, 0], [31.799728, 32.821406], [32.925896, 33.935964], [34.028844, 34.957642], [35.027302, 36.107029]],
    [[0, 0], [36.815238, 37.883356], [38.080726, 39.125624], [39.241723, 40.112472], [40.391111, 41.366349]],
    [[0, 0], [42.028118, 42.864036], [43.026576, 43.920544], [0, 0], [44.059864, 45.000272]],
    [[0, 0], [0, 0], [0, 0], [45.569161, 46.532789], [0, 0]],
    [[0, 0], [47.519637, 48.448435], [48.692245, 49.655873], [49.748753, 50.561451], [50.677551, 51.559909]],
    [[0, 0], [52.117188, 53.045986], [53.127256, 54.148934], [54.334694, 55.147392], [55.460862, 56.29678]],
    [[0, 0], [57.097868, 58.096327], [58.189206, 59.094785], [0, 0], [0, 0]],
    [[0, 0], [59.675283, 60.685351], [60.847891, 61.60254], [61.857959, 62.717098], [62.972517, 63.866485]],
    [[0, 0], [64.458594, 65.364172], [65.445442, 66.35102], [66.45551, 67.314649], [67.512018, 68.417596]],
    [[0, 0], [69.218685, 70.182313], [70.286803, 71.262041], [71.42458, 72.330159], [72.492698, 73.375057]],
    [[0, 0], [74.141315, 74.977234], [75.151383, 75.929252], [76.115011, 76.85805], [77.067029, 77.833288]],
    [[0, 0], [78.541497, 79.516735], [79.621224, 80.445533], [0, 0], [80.654512, 81.548481]],
    [[0, 0], [82.361179, 83.197098], [83.278367, 84.079456], [84.207166, 85.182404], [85.286893, 86.111202]],
    [[0, 0], [87.04, 88.026848], [88.119728, 88.885986], [89.060136, 89.930884], [90.023764, 90.882902]],
    [[0, 0], [91.788481, 92.601179], [92.659229, 93.576417], [93.715737, 94.621315], [94.714195, 95.538503]],
    [[0, 0], [96.269932, 97.21034], [97.31483, 98.243628], [98.429388, 99.207256], [99.393016, 100.298594]]
];

        const audio = document.getElementById("audioPlayer");
        const playbackAudio = document.getElementById("playbackAudio");
        const matrix = document.getElementById("matrix");
        const recordButton = document.getElementById("recordButton");
        const playbackButton = document.getElementById("playbackButton");
        const saveButton = document.getElementById("saveButton");
        let mediaRecorder;
        let recordedChunks = [];
        let isRecording = false;
        let buttons = [];

        // Tạo ma trận nút
        for (let i = 0; i < labels.length; i++) {
            const row = document.createElement("div");
            row.className = "row"; // Thêm class row để áp dụng Flexbox
            buttons[i] = [];
            for (let j = 0; j < 5; j++) { // Số cột là 5
                if (i === 0 && j === 0) {
                    const emptyCell = document.createElement("span");
                    emptyCell.style.display = "inline-block";
                    emptyCell.style.width = "100px";
                    emptyCell.style.height = "40px";
                    emptyCell.style.margin = "2px";
                    row.appendChild(emptyCell);
                    continue;
                }
                const button = document.createElement("button");
                button.className = "button" + (i === 0 || j === 0 ? " header-button" : " normal-button");
                button.textContent = labels[i][j];
                button.dataset.row = i; // Lưu chỉ số hàng
                button.dataset.col = j; // Lưu chỉ số cột
                button.onclick = () => playAudioSegment(i, j, button);
                buttons[i][j] = button;
                row.appendChild(button);
            }
            matrix.appendChild(row);
        }

        // Hàm phát đoạn audio gốc
        function playAudioSegment(row, col, button) {
            const [start, end] = audioSegments[row][col];
            if (start === 0 && end === 0) return; // Bỏ qua nếu là [0, 0]

            // Vô hiệu hóa tất cả các nút trước khi phát âm thanh
            buttons.forEach(rowButtons => {
                rowButtons.forEach(btn => {
                    if (btn) btn.disabled = true; // Kiểm tra btn tồn tại để tránh lỗi với ô trống
                });
            });

            button.classList.add("playing");
            audio.currentTime = start;
            audio.play();
            const duration = (end - start) * 1000; // Chuyển sang mili giây
            setTimeout(() => {
                audio.pause();
                button.classList.remove("playing");
                // Kích hoạt lại tất cả các nút sau khi âm thanh kết thúc
                buttons.forEach(rowButtons => {
                    rowButtons.forEach(btn => {
                        if (btn) btn.disabled = false; // Kiểm tra btn tồn tại để tránh lỗi với ô trống
                    });
                });
            }, duration);
        }

        // Hàm ghi âm và dừng ghi âm
        recordButton.onclick = () => {
            if (!isRecording) {
                navigator.mediaDevices.getUserMedia({ audio: true })
                    .then(stream => {
                        mediaRecorder = new MediaRecorder(stream);
                        recordedChunks = [];
                        mediaRecorder.ondataavailable = e => recordedChunks.push(e.data);
                        mediaRecorder.onstop = () => {
                            const blob = new Blob(recordedChunks, { type: 'audio/wav' });
                            playbackAudio.src = URL.createObjectURL(blob);
                        };
                        mediaRecorder.start();
                        isRecording = true;
                        recordButton.textContent = "在录";
                        recordButton.className = "button recording";
                    })
                    .catch(err => console.error("Lỗi ghi âm: ", err));
            } else {
                mediaRecorder.stop();
                isRecording = false;
                recordButton.textContent = "录音";
                recordButton.className = "button record-button";
            }
        };

        // Hàm phát lại ghi âm
        playbackButton.onclick = () => {
            if (playbackAudio.src) {
                playbackAudio.play();
            }
        };

        // Hàm lưu ghi âm
        saveButton.onclick = () => {
            if (recordedChunks.length > 0) {
                const blob = new Blob(recordedChunks, { type: 'audio/wav' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement("a");
                a.style.display = "none";
                a.href = url;
                a.download = `recording_${new Date().getTime()}.wav`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
            }
        };
    </script>
</p>
<p></p></div>
</div>
</div>
</article>
</section>
</div>
<div id='bottomPagination'>
<nav class="pagination noprt">
<a href="2___a.html" class="prev"><span><span>&laquo; </span>Previous</span></a> <span class="sep">| </span><a href="4____ng.html" class="next"><span>Next<span> &raquo;</span></span></a>
</nav>
</div>
</div>
<p id="made-with-eXe"><a href="https://exelearning.net/" target="_blank" rel="noopener"><span>Made with eXeLearning<span> (New Window)</span></span></a></p><script type="text/javascript" src="style_js.js"></script></body></html>